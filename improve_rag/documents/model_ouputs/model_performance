THE FOLLOWING PERFORMANCE IS WITH THE PREPROCESSING STEPS:
-- Non-rotated pages for HB300__.pdf

üìä Loading ground truth labels...
ü§ñ Loading model predictions...
üìù Using mapping: 0=budget_table, 1=text
üîç Matching predictions with ground truth...
‚ö†Ô∏è  No prediction found for page 144

============================================================
üìà CLASSIFICATION EVALUATION RESULTS
============================================================

üéØ OVERALL PERFORMANCE:
   Accuracy: 0.843 (84.3%)
   Precision (weighted): 0.884
   Recall (weighted): 0.843
   F1-Score (weighted): 0.852

üìä PER-CLASS METRICS:
   TEXT:
      Precision: 0.618
      Recall: 0.919
      F1-Score: 0.739
      Support: 37 samples
   BUDGET_TABLE:
      Precision: 0.969
      Recall: 0.819
      F1-Score: 0.888
      Support: 116 samples

üî¢ CONFUSION MATRIX:
                 Predicted
                text  budget_table
Actual   text       34        3
    budget_table    21       95

üìä CONFIDENCE ANALYSIS:
   Correct predictions - Avg confidence: 86.2%
   Incorrect predictions - Avg confidence: 93.8%

‚ùå ERRORS (24 total):
   Page 63: text ‚Üí budget_table (70%)
      Reason: Both extractions show appropriations data for specific programs and fiscal bienn...
   Page 73: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains clear budget line items with dollar amounts, program...
   Page 79: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows a clear budget table with line items containing dollar ...
   Page 81: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows budget line items with dollar amounts, department names...
   Page 82: budget_table ‚Üí text (95%)
      Reason: Neither PDF extraction shows budget line items with dollar amounts, department n...
   Page 84: budget_table ‚Üí text (95%)
      Reason: Neither PDFPLUMBER nor CAMELOT extractions contain budget line items with dollar...
   Page 85: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains the key elements of a budget table such as dollar am...
   Page 87: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains budget line items with dollar amounts, fund types, f...
   Page 89: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows clear budget line items with dollar amounts, department...
   Page 93: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains budget line items with dollar amounts, program IDs, ...
   Page 94: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains any budget line items with dollar amounts, fund type...
   Page 96: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows clear budget line items with dollar amounts, department...
   Page 105: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows any budget line items with dollar amounts, program IDs,...
   Page 108: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows budget line items with dollar amounts, program IDs, fun...
   Page 109: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows a table with budget line items containing dollar amount...
   Page 110: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains budget line items with dollar amounts, program IDs, ...
   Page 111: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows a structured table with budget line items containing do...
   Page 112: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows clear budget line items with dollar amounts, department...
   Page 116: budget_table ‚Üí text (95%)
      Reason: Neither PDFPlumber nor Camelot extractions show any clear budget line items with...
   Page 117: budget_table ‚Üí text (95%)
      Reason: Neither extraction shows clear budget line items with dollar amounts, department...
   Page 118: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains budget line items with dollar amounts, department na...
   Page 123: budget_table ‚Üí text (95%)
      Reason: Neither Camelot nor PDFPlumber extractions contain any budget line items with do...
   Page 126: text ‚Üí budget_table (95%)
      Reason: Both extractions reveal a table with 'Item No.' and corresponding dollar amounts...
   Page 146: text ‚Üí budget_table (90%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($2,500 and...

THE FOLLOWING PERFORMANCE IS WITH THE PREPROCESSING STEPS:
-- ROTATED pages for HB300__.pdf

THE FOLLOWING PERFORMANCE IS WITH THE PREPROCESSING STEPS:
-- ROTATED pages for HB300__.pdf
, but also the other PDF documents

üìä Loading ground truth labels...
ü§ñ Loading model predictions...
üìù Using mapping: 0=budget_table, 1=text
üîç Matching predictions with ground truth...

============================================================
üìà CLASSIFICATION EVALUATION RESULTS
============================================================

üéØ OVERALL PERFORMANCE:
   Accuracy: 0.842 (84.2%)
   Precision (weighted): 0.841
   Recall (weighted): 0.842
   F1-Score (weighted): 0.837

üìä PER-CLASS METRICS:
   TEXT:
      Precision: 0.830
      Recall: 0.667
      F1-Score: 0.739
      Support: 66 samples
   BUDGET_TABLE:
      Precision: 0.846
      Recall: 0.931
      F1-Score: 0.886
      Support: 130 samples

üî¢ CONFUSION MATRIX:
                 Predicted
                text  budget_table
Actual   text       44       22
    budget_table     9      121

üìä CONFIDENCE ANALYSIS:
   Correct predictions - Avg confidence: 90.7%
   Incorrect predictions - Avg confidence: 91.6%

‚ùå ERRORS (31 total):
   Page 58: text ‚Üí budget_table (95%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($225,000.0...
   Page 59: text ‚Üí budget_table (90%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($75,000.00...
   Page 60: text ‚Üí budget_table (90%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($100,000.0...
   Page 61: text ‚Üí budget_table (80%)
      Reason: Both extractions show dollar amounts ($100,000.00, $200,000.00, $20,000.00) asso...
   Page 62: text ‚Üí budget_table (95%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($300,000.0...
   Page 63: text ‚Üí budget_table (95%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($350,000.0...
   Page 64: text ‚Üí budget_table (95%)
      Reason: Both extractions show a list of entities (Hawaii Symphony Orchestra, Hawaii Tax ...
   Page 65: text ‚Üí budget_table (95%)
      Reason: Both extractions show a table with line items including dollar amounts ($20,000....
   Page 66: text ‚Üí budget_table (90%)
      Reason: Both extractions show a list of entries with line numbers (33, 34, 35, 36...), d...
   Page 67: text ‚Üí budget_table (95%)
      Reason: Both extractions clearly show multiple budget line items with dollar amounts ($2...
   Page 68: text ‚Üí budget_table (95%)
      Reason: Both extractions show a list of entities (e.g., KOOLAULOA HEALTH CENTER, KUALOA-...
   Page 69: text ‚Üí budget_table (90%)
      Reason: Both extractions show a list of entities (e.g., Legal Clinic, Leilehua Alumni As...
   Page 70: text ‚Üí budget_table (95%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($375,000.0...
   Page 71: text ‚Üí budget_table (95%)
      Reason: Both extractions reveal multiple budget line items.  They include dollar amounts...
   Page 72: text ‚Üí budget_table (90%)
      Reason: Both extractions show a list of entities (PACIFIC TSUNAMI MUSEUM, INC., PARENTS ...
   Page 73: text ‚Üí budget_table (90%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($300,000.0...
   Page 74: text ‚Üí budget_table (95%)
      Reason: Both extractions clearly show multiple budget line items with dollar amounts ($2...
   Page 75: text ‚Üí budget_table (95%)
      Reason: Both extractions show multiple budget line items with dollar amounts ($75,000.00...
   Page 76: text ‚Üí budget_table (85%)
      Reason: Both extractions show a dollar amount ($100,000.00) associated with a specific p...
   Page 86: budget_table ‚Üí text (90%)
      Reason: Neither extraction contains actual dollar amounts or financial appropriations da...
   Page 88: budget_table ‚Üí text (90%)
      Reason: While the extractions show project names, descriptions, and agency names, they l...
   Page 89: budget_table ‚Üí text (90%)
      Reason: While the extractions show project names, descriptions, and what seems to be fun...
   Page 90: budget_table ‚Üí text (95%)
      Reason: Neither extraction contains actual dollar amounts or appropriations.  While the ...
   Page 91: budget_table ‚Üí text (95%)
      Reason: While the extractions mention budget items and fiscal years (2025-2026, 2026-202...
   Page 93: budget_table ‚Üí text (90%)
      Reason: While the extractions show project names, descriptions, and funding sources (LBR...
   Page 96: budget_table ‚Üí text (90%)
      Reason: While the extractions show budget-related information such as project titles, de...
   Page 98: budget_table ‚Üí text (95%)
      Reason: While the extractions show project names, descriptions, and project IDs (numbers...
   Page 107: budget_table ‚Üí text (90%)
      Reason: While the extractions show project descriptions and project IDs (TRN numbers),  ...
   Page 163: text ‚Üí budget_table (95%)
      Reason: Both extractions clearly show a table with Item Nos. (program IDs), dollar amoun...
   Page 164: text ‚Üí budget_table (80%)
      Reason: Both extractions show budget line items with dollar amounts (45,000 and 5,000). ...
   Page 171: text ‚Üí budget_table (90%)
      Reason: Both extractions reveal data consistent with budget line items.  Specifically, t...
üìä Loading ground truth labels...
ü§ñ Loading model predictions...
üìù Using mapping: 0=budget_table, 1=text
üîç Matching predictions with ground truth...

============================================================
üìà CLASSIFICATION EVALUATION RESULTS
============================================================

üéØ OVERALL PERFORMANCE:
   Accuracy: 0.971 (97.1%)
   Precision (weighted): 0.972
   Recall (weighted): 0.971
   F1-Score (weighted): 0.971

üìä PER-CLASS METRICS:
   TEXT:
      Precision: 0.932
      Recall: 0.953
      F1-Score: 0.943
      Support: 43 samples
   BUDGET_TABLE:
      Precision: 0.985
      Recall: 0.977
      F1-Score: 0.981
      Support: 131 samples

üî¢ CONFUSION MATRIX:
                 Predicted
                text  budget_table
Actual   text       41        2
    budget_table     3      128

üìä CONFIDENCE ANALYSIS:
   Correct predictions - Avg confidence: 90.7%
   Incorrect predictions - Avg confidence: 92.0%

‚ùå ERRORS (5 total):
   Page 83: budget_table ‚Üí text (95%)
      Reason: While the extractions contain project descriptions and project IDs (LNR numbers)...
   Page 122: budget_table ‚Üí text (90%)
      Reason: While the extractions mention budget amounts (225, 1, 1300),  they lack the stru...
   Page 125: budget_table ‚Üí text (90%)
      Reason: Neither extraction contains actual dollar amounts or financial appropriations da...
   Page 140: text ‚Üí budget_table (95%)
      Reason: Both extractions clearly show a table with Item Nos., dollar amounts ('Amount (M...
   Page 141: text ‚Üí budget_table (90%)
      Reason: Both extractions show budget line items with dollar amounts (45,000 and 2,000, a...
üìä Loading ground truth labels...
ü§ñ Loading model predictions...
üìù Using mapping: 0=budget_table, 1=text
üîç Matching predictions with ground truth...

============================================================
üìà CLASSIFICATION EVALUATION RESULTS
============================================================

üéØ OVERALL PERFORMANCE:
   Accuracy: 0.948 (94.8%)
   Precision (weighted): 0.952
   Recall (weighted): 0.948
   F1-Score (weighted): 0.949

üìä PER-CLASS METRICS:
   TEXT:
      Precision: 0.812
      Recall: 0.929
      F1-Score: 0.867
      Support: 28 samples
   BUDGET_TABLE:
      Precision: 0.984
      Recall: 0.952
      F1-Score: 0.968
      Support: 126 samples

üî¢ CONFUSION MATRIX:
                 Predicted
                text  budget_table
Actual   text       26        2
    budget_table     6      120

üìä CONFIDENCE ANALYSIS:
   Correct predictions - Avg confidence: 91.7%
   Incorrect predictions - Avg confidence: 91.9%

‚ùå ERRORS (8 total):
   Page 73: budget_table ‚Üí text (90%)
      Reason: While both extractions mention dollar amounts (e.g., 34,992 B, 44,992B),  they l...
   Page 82: budget_table ‚Üí text (90%)
      Reason: While the extractions show project descriptions, titles, and some numerical valu...
   Page 89: budget_table ‚Üí text (95%)
      Reason: While both extractions mention funding amounts ('LNR 2,000C', 'LNR 3,000C', '8,7...
   Page 112: budget_table ‚Üí text (90%)
      Reason: While the extractions contain project descriptions, project IDs (e.g., UOH210), ...
   Page 130: budget_table ‚Üí text (90%)
      Reason: While the extractions show project descriptions and total funding amounts ('2,00...
   Page 132: budget_table ‚Üí text (95%)
      Reason: While the extractions mention project names, descriptions, and some funding amou...
   Page 133: text ‚Üí budget_table (95%)
      Reason: Both extractions show a table with 'Item No.', dollar amounts ('Amount (MOF)'), ...
   Page 134: text ‚Üí budget_table (90%)
      Reason: Both extractions show a list of program IDs (G-64, G-70.1, etc.) with correspond...
üìä Loading ground truth labels...
ü§ñ Loading model predictions...
üìù Using mapping: 0=budget_table, 1=text
üîç Matching predictions with ground truth...

============================================================
üìà CLASSIFICATION EVALUATION RESULTS
============================================================

üéØ OVERALL PERFORMANCE:
   Accuracy: 0.981 (98.1%)
   Precision (weighted): 0.980
   Recall (weighted): 0.981
   F1-Score (weighted): 0.980

üìä PER-CLASS METRICS:
   TEXT:
      Precision: 0.973
      Recall: 0.947
      F1-Score: 0.960
      Support: 38 samples
   BUDGET_TABLE:
      Precision: 0.983
      Recall: 0.991
      F1-Score: 0.987
      Support: 116 samples

üî¢ CONFUSION MATRIX:
                 Predicted
                text  budget_table
Actual   text       36        2
    budget_table     1      115

üìä CONFIDENCE ANALYSIS:
   Correct predictions - Avg confidence: 92.2%
   Incorrect predictions - Avg confidence: 91.7%

‚ùå ERRORS (3 total):
   Page 83: budget_table ‚Üí text (90%)
      Reason: While the PDF contains references to appropriations and fiscal years, and mentio...
   Page 126: text ‚Üí budget_table (95%)
      Reason: Both extractions reveal a table with 'Item No.' and corresponding dollar amounts...
   Page 146: text ‚Üí budget_table (90%)
      Reason: Both extractions show clear budget appropriations.  The Camelot extraction prese...

Model Version 2 -- This model uses camelot and pdfplumber to extract budget items.
I try to enforce the model to generate the unknown fields that may be unknown. I just started using "retry" here, with a defaul of 3 attempts
in order to ensure that no unknowns are missed.
SUMMARY for HB300_HD1:
Unknown field breakdown:
    program: 43
    program_id: 147
    expending_agency: 45
    fiscal_year_2025_2026_amount: 34
    appropriations_mof_2025_2026: 30
    fiscal_year_2026_2027_amount: 128
    appropriations_mof_2026_2027: 112
  Percentage with unknowns: 24.0%
  Saved to: ./model_ouputs/processed_documents/processed_HB300_HD1_geminiV2.json

==================================================

Model Version 2 -- Same as above
SUMMARY for HB300_CD1:
  Total pages: 196
  Pages processed: 196
  Budget items extracted: 975
  Text items extracted: 196
  Budget items with unknowns: 319
  Total unknown fields: 892
  Unknown field breakdown:
    program: 38
    program_id: 156
    expending_agency: 72
    fiscal_year_2025_2026_amount: 61
    appropriations_mof_2025_2026: 134
    fiscal_year_2026_2027_amount: 225
    appropriations_mof_2026_2027: 206
  Percentage with unknowns: 32.7%
  Saved to: ./model_ouputs/processed_documents/processed_HB300_CD1_geminiV2.json

==================================================
Models 3 and 4 use previous page and 3 recent budget items as context.

Model Version 3 -- This model only uses pdfplumber to extract budget items.
SUMMARY for HB300_HD1:
  Total pages: 174
  Pages processed: 174
  Budget items extracted: 787
  Text items extracted: 173
  Budget items with unknowns: 250
  Total unknown fields: 374
  Unknown field breakdown:
    program: 49
    program_id: 204
    expending_agency: 30
    fiscal_year_2025_2026_amount: 16
    appropriations_mof_2025_2026: 22
    fiscal_year_2026_2027_amount: 23
    appropriations_mof_2026_2027: 30
  Percentage with unknowns: 31.8%
  Saved to: ./model_ouputs/processed_documents/processed_HB300_HD1_geminiV3.json

Model Version 4 -- This model uses camelot and pdfplumber to extract budget items.
SUMMARY for HB300_HD1:
  Total pages: 174
  Pages processed: 174
  Budget items extracted: 795
  Text items extracted: 174
  Budget items with unknowns: 196
  Total unknown fields: 306
  Unknown field breakdown:
    program: 36
    program_id: 142
    expending_agency: 31
    fiscal_year_2025_2026_amount: 19
    appropriations_mof_2025_2026: 24
    fiscal_year_2026_2027_amount: 27
    appropriations_mof_2026_2027: 27
  Percentage with unknowns: 24.7%
  Saved to: ./model_ouputs/processed_documents/processed_HB300_HD1_geminiV4.json