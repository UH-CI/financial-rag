@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-gray-50 text-gray-900;
  }
  

}

@layer components {
  .search-container {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
  }
  
  .result-card {
    @apply bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow duration-200;
  }
  
  .loading-spinner {
    @apply animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600;
  }
  
  .btn-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-secondary {
    @apply bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium py-2 px-4 rounded-md transition-colors duration-200;
  }
  
  .input-field {
    @apply w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
  }
  
  .search-input {
    @apply w-full px-4 py-3 text-lg border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400;
  }

  /* Markdown styling for chat messages */
  .chat-markdown {
    @apply text-sm leading-relaxed;
  }
  
  .chat-markdown h1,
  .chat-markdown h2,
  .chat-markdown h3,
  .chat-markdown h4,
  .chat-markdown h5,
  .chat-markdown h6 {
    @apply font-semibold text-gray-900 mt-4 mb-2 first:mt-0;
  }
  
  .chat-markdown p {
    @apply mb-3 last:mb-0;
  }
  
  .chat-markdown ul,
  .chat-markdown ol {
    @apply mb-3 pl-6;
  }
  
  .chat-markdown li {
    @apply mb-1;
  }
  
  .chat-markdown blockquote {
    @apply border-l-4 border-blue-200 pl-4 py-2 my-3 bg-blue-50 italic text-gray-700;
  }
  
  .chat-markdown code {
    @apply bg-gray-100 text-red-600 px-1 py-0.5 rounded text-xs font-mono;
  }
  
  .chat-markdown pre {
    @apply bg-gray-100 p-3 rounded-lg overflow-x-auto my-3;
  }
  
  .chat-markdown pre code {
    @apply bg-transparent text-gray-800 p-0;
  }
  
  .chat-markdown table {
    @apply w-full border-collapse my-3;
  }
  
  .chat-markdown th,
  .chat-markdown td {
    @apply border border-gray-300 px-3 py-2 text-left;
  }
  
  .chat-markdown th {
    @apply bg-gray-100 font-semibold;
  }
  
  .chat-markdown strong {
    @apply font-semibold text-gray-900;
  }
  
  .chat-markdown em {
    @apply italic;
  }
  
  .chat-markdown a {
    @apply text-blue-600 hover:text-blue-800 underline;
  }
}

/* Print styles for fiscal notes */
@media print {
  /* Hide navigation and non-essential elements */
  .print\\:hidden {
    display: none !important;
  }
  
  /* Show print-only elements */
  .print\\:block {
    display: block !important;
  }
  
  /* Ensure proper page breaks */
  .page-break-before {
    page-break-before: always;
  }
  
  /* Remove shadows and borders for cleaner print */
  .shadow-sm,
  .shadow-md,
  .shadow-lg {
    box-shadow: none !important;
  }
  
  /* Ensure links are visible in print */
  a[href]:after {
    content: none !important;
  }
  
  /* Make sure citations are visible */
  .text-blue-600,
  .text-green-600 {
    color: #000 !important;
  }
  
  /* Optimize spacing for print */
  body {
    background: white;
  }
  
  /* Remove padding adjustments */
  .print\\:pb-8 {
    padding-bottom: 2rem !important;
  }
}

/* Mobile-specific utilities */
@layer utilities {
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Smooth scrolling for mobile */
  .scroll-smooth {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Line clamp utilities for text truncation */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Touch-friendly tap targets */
  .tap-target {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Prevent text selection on mobile for UI elements */
  .no-select {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  /* Safe area padding for notched devices */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* Mobile viewport fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific fixes */
  .h-screen {
    height: -webkit-fill-available;
  }
}

/* Improve touch scrolling performance */
* {
  -webkit-tap-highlight-color: transparent;
}

/* Enhanced mobile scrolling fixes */
@media (max-width: 1024px) {
  /* Force hardware acceleration for scrolling containers */
  .overflow-y-auto,
  .overflow-auto,
  .scroll-smooth {
    -webkit-overflow-scrolling: touch;
    transform: translateZ(0);
    will-change: scroll-position;
  }
  
  /* Ensure scrollable areas have proper momentum */
  .mobile-scroll {
    -webkit-overflow-scrolling: touch;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000;
  }
  
  /* Critical mobile scroll fix - avoid 100vh issues */
  html, body {
    height: 100%;
    overflow: hidden;
    -webkit-overflow-scrolling: touch;
    /* Prevent iOS bounce but allow scrolling */
    overscroll-behavior: contain;
  }
  
  /* Fix root container - use min-height instead of height */
  #root {
    height: 100vh;
    height: -webkit-fill-available; /* iOS Safari fix */
    overflow: hidden;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Ensure h-screen class works properly on mobile */
  .h-screen {
    height: 100vh;
    height: -webkit-fill-available; /* iOS Safari fix */
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
}

/* Ensure tables are scrollable on mobile */
@media (max-width: 768px) {
  table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
  }
}

/* Responsive tooltip positioning to prevent edge cutoff */
.tooltip-container {
  position: relative;
}

.tooltip-content {
  position: absolute;
  z-index: 99999;
  pointer-events: none;
  white-space: nowrap;
  
  /* Default: bottom-center */
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 0.5rem;
}

/* Adjust tooltip if it would overflow left edge */
.tooltip-content[data-overflow="left"] {
  left: 0;
  transform: translateX(0);
}

/* Adjust tooltip if it would overflow right edge */
.tooltip-content[data-overflow="right"] {
  left: auto;
  right: 0;
  transform: translateX(0);
}

/* Show tooltip above by default, but below if no room above */
.tooltip-content[data-position="below"] {
  bottom: auto;
  top: 100%;
  margin-bottom: 0;
  margin-top: 0.5rem;
}
